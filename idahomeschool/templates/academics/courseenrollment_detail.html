{% extends "academics/base.html" %}
{% load static %}

{% block title %}{{ enrollment.student.name }} - {{ enrollment.course.name }}{% endblock %}

{% block academics_content %}
<div class="flex justify-between items-center mb-4">
  <h1 class="text-3xl font-bold">{{ enrollment.student.name }} - {{ enrollment.course.name }}</h1>
  <div class="flex gap-2">
    <a href="{% url 'academics:courseenrollment_update' enrollment.pk %}" class="btn-primary">Edit</a>
    <a href="{% url 'academics:courseenrollment_delete' enrollment.pk %}" class="btn-outline text-destructive hover:bg-destructive hover:text-destructive-foreground">Delete</a>
  </div>
</div>

<div class="card">
  <header>
    <h2>Enrollment Details</h2>
  </header>
  <section>
    <dl class="grid grid-cols-3 gap-2">
      <dt class="font-semibold">Student:</dt>
      <dd class="col-span-2"><a href="{% url 'academics:student_detail' enrollment.student.pk %}">{{ enrollment.student.name }}</a></dd>

      <dt class="font-semibold">Course:</dt>
      <dd class="col-span-2"><a href="{% url 'academics:course_detail' enrollment.course.pk %}">{{ enrollment.course.name }}</a></dd>

      <dt class="font-semibold">School Year:</dt>
      <dd class="col-span-2"><a href="{% url 'academics:schoolyear_detail' enrollment.school_year.pk %}">{{ enrollment.school_year.name }}</a></dd>

      <dt class="font-semibold">Status:</dt>
      <dd class="col-span-2">
        {% if enrollment.status == 'COMPLETED' %}
          <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-green-600 text-white">{{ enrollment.get_status_display }}</span>
        {% elif enrollment.status == 'PAUSED' %}
          <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-yellow-600 text-white">{{ enrollment.get_status_display }}</span>
        {% else %}
          <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-blue-600 text-white">{{ enrollment.get_status_display }}</span>
        {% endif %}
      </dd>

      {% if enrollment.started_date %}
      <dt class="font-semibold">Started Date:</dt>
      <dd class="col-span-2">{{ enrollment.started_date|date:"F d, Y" }}</dd>
      {% endif %}

      {% if enrollment.completed_date %}
      <dt class="font-semibold">Completed Date:</dt>
      <dd class="col-span-2">{{ enrollment.completed_date|date:"F d, Y" }}</dd>
      {% endif %}

      {% if enrollment.completion_percentage %}
      <dt class="font-semibold">Progress:</dt>
      <dd class="col-span-2">
        <div class="progress">
          <div class="progress-bar" role="progressbar" style="width: {{ enrollment.completion_percentage }}%" aria-valuenow="{{ enrollment.completion_percentage }}" aria-valuemin="0" aria-valuemax="100">{{ enrollment.completion_percentage }}%</div>
        </div>
      </dd>
      {% endif %}

      {% if enrollment.final_grade %}
      <dt class="font-semibold">Final Grade:</dt>
      <dd class="col-span-2">{{ enrollment.final_grade }}</dd>
      {% endif %}

      <dt class="font-semibold">Created:</dt>
      <dd class="col-span-2">{{ enrollment.created_at|date:"F d, Y" }}</dd>

      <dt class="font-semibold">Last Updated:</dt>
      <dd class="col-span-2">{{ enrollment.updated_at|date:"F d, Y" }}</dd>
    </dl>
  </section>
</div>

<div class="mt-3">
  <a href="{% url 'academics:courseenrollment_list' %}" class="btn-outline">Back to Enrollments</a>
</div>
{% endblock academics_content %}
