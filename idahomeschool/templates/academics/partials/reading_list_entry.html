{% load academics_extras %}

<div class="card h-100">
  {% if entry.resource.image %}
  <img src="{{ entry.resource.image.url }}" class="card-img-top" alt="{{ entry.resource.title }}" style="height: 200px; object-fit: cover;">
  {% endif %}
  <div class="card-body">
    <h5 class="card-title">
      <a href="{% url 'academics:resource_detail' entry.resource.pk %}">{{ entry.resource.title }}</a>
    </h5>
    {% if entry.resource.author %}
    <h6 class="card-subtitle mb-2 text-muted">by {{ entry.resource.author }}</h6>
    {% endif %}

    <div class="mb-2">
      {% include "academics/partials/reading_status_badge.html" with entry=entry %}
    </div>

    <p class="card-text">
      <strong>Student:</strong>
      <a href="{% url 'academics:student_detail' entry.student.pk %}">{{ entry.student.name }}</a>
    </p>

    {% if entry.school_year %}
    <p class="card-text">
      <strong>School Year:</strong> {{ entry.school_year.name }}
    </p>
    {% endif %}

    {% if entry.rating %}
    <p class="card-text">
      <strong>Rating:</strong>
      {% for i in "12345" %}
        {% if forloop.counter <= entry.rating %}
          ⭐
        {% else %}
          ☆
        {% endif %}
      {% endfor %}
    </p>
    {% endif %}

    {% if entry.started_date %}
    <p class="card-text text-muted small">
      Started: {{ entry.started_date|date:"M d, Y" }}
    </p>
    {% endif %}

    {% if entry.completed_date %}
    <p class="card-text text-muted small">
      Completed: {{ entry.completed_date|date:"M d, Y" }}
    </p>
    {% endif %}

    {% if entry.resource.tags.all %}
    <div class="mt-2">
      {% for tag in entry.resource.tags.all %}
        {% tag_badge tag size="sm" %}
      {% endfor %}
    </div>
    {% endif %}
  </div>
  <div class="card-footer bg-transparent">
    <div class="btn-group w-100" role="group">
      <a href="{% url 'academics:readinglist_update' entry.pk %}" class="btn btn-sm btn-outline-primary">
        Edit
      </a>
      <a href="{% url 'academics:readinglist_detail' entry.pk %}" class="btn btn-sm btn-outline-info">
        View
      </a>
      <a href="{% url 'academics:readinglist_delete' entry.pk %}" class="btn btn-sm btn-outline-danger">
        Remove
      </a>
    </div>
  </div>
</div>
