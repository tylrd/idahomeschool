{% load academics_extras %}

<div class="card h-full">
  {% if entry.resource.image %}
  <img src="{{ entry.resource.image.url }}" class="rounded-t-lg w-full" alt="{{ entry.resource.title }}" style="height: 200px; object-fit: cover;">
  {% endif %}
  <section>
    <h3 class="text-lg font-semibold">
      <a href="{% url 'academics:resource_detail' entry.resource.pk %}">{{ entry.resource.title }}</a>
    </h3>
    {% if entry.resource.author %}
    <p class="text-muted-foreground mb-2">by {{ entry.resource.author }}</p>
    {% endif %}

    <div class="mb-2">
      {% include "academics/partials/reading_status_badge.html" with entry=entry %}
    </div>

    <p>
      <strong>Student:</strong>
      <a href="{% url 'academics:student_detail' entry.student.pk %}">{{ entry.student.name }}</a>
    </p>

    {% if entry.school_year %}
    <p>
      <strong>School Year:</strong> {{ entry.school_year.name }}
    </p>
    {% endif %}

    {% if entry.rating %}
    <p>
      <strong>Rating:</strong>
      {% for i in "12345" %}
        {% if forloop.counter <= entry.rating %}
          ⭐
        {% else %}
          ☆
        {% endif %}
      {% endfor %}
    </p>
    {% endif %}

    {% if entry.started_date %}
    <p class="text-muted-foreground text-sm">
      Started: {{ entry.started_date|date:"M d, Y" }}
    </p>
    {% endif %}

    {% if entry.completed_date %}
    <p class="text-muted-foreground text-sm">
      Completed: {{ entry.completed_date|date:"M d, Y" }}
    </p>
    {% endif %}

    {% if entry.resource.tags.all %}
    <div class="mt-2">
      {% for tag in entry.resource.tags.all %}
        {% tag_badge tag size="sm" %}
      {% endfor %}
    </div>
    {% endif %}
  </section>
  <footer class="bg-transparent">
    <div class="flex gap-1 pt-3 border-t">
      <a href="{% url 'academics:readinglist_detail' entry.pk %}"
         class="btn-icon-outline size-8">
        <i data-lucide="eye"></i>
      </a>
      <button type="button"
              onclick="document.getElementById('dialog-edit-{{ entry.pk }}').showModal()"
              class="btn-icon-outline size-8">
        <i data-lucide="pencil"></i>
      </button>
      <button type="button"
              onclick="document.getElementById('dialog-delete-{{ entry.pk }}').showModal()"
              class="btn-icon-outline size-8 text-destructive hover:bg-destructive/10">
        <i data-lucide="trash-2"></i>
      </button>
    </div>
  </footer>
</div>
