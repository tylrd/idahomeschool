{% extends "academics/base.html" %}
{% load static %}

{% block title %}Daily Log Entry{% endblock %}

{% block academics_content %}
<div class="flex justify-between items-center mb-3">
  <h1 class="text-3xl font-bold">Daily Log Entry</h1>
  <div class="flex gap-2">
    <a href="{% url 'academics:attendance_calendar' %}" class="btn btn-sm bg-secondary text-secondary-foreground">Calendar View</a>
    <a href="{% url 'academics:dailylog_list' %}" class="btn btn-sm bg-secondary text-secondary-foreground">All Logs</a>
  </div>
</div>

<!-- Student and Date Selection -->
<div class="card mb-3">
  <section class="py-3">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="grid gap-2">
        <label for="student_select">Student</label>
        <select id="student_select" name="student_id"
                hx-get="{% url 'academics:dailylog_entry' %}"
                hx-target="#dailylog-form-container"
                hx-push-url="true"
                hx-include="#date_input"
                hx-trigger="change">
          {% for s in students %}
            <option value="{{ s.id }}" {% if s.id == student.id %}selected{% endif %}>{{ s.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="grid gap-2">
        <label for="date_input">Date</label>
        <div class="flex gap-1">
          <input type="date"
                 id="date_input"
                 name="date"
                 class="flex-1 min-w-0"
                 value="{{ entry_date|date:'Y-m-d' }}"
                 hx-get="{% url 'academics:dailylog_entry' %}"
                 hx-target="#dailylog-form-container"
                 hx-push-url="true"
                 hx-include="#student_select"
                 hx-trigger="change">
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Daily Log Entry Form Container -->
<div id="dailylog-form-container">
  {% include "academics/partials/dailylog_entry_form.html" %}
</div>
{% endblock academics_content %}
