{% extends "academics/base.html" %}
{% load static %}

{% block title %}Daily Log - {{ daily_log.student.name }} - {{ daily_log.date }}{% endblock %}

{% block academics_content %}
<div class="flex justify-between items-center mb-4">
  <h1 class="text-3xl font-bold">Daily Log Details</h1>
  <div class="flex gap-2">
    <a href="{% url 'academics:dailylog_entry_date' daily_log.student.pk daily_log.date|date:'Y-m-d' %}" class="btn-primary">Edit</a>
    <a href="{% url 'academics:dailylog_list' %}" class="btn-outline">Back to List</a>
  </div>
</div>

<!-- Daily Log Info -->
<div class="card mb-4">
  <header>
    <h2>{{ daily_log.student.name }} - {{ daily_log.date|date:"l, F j, Y" }}</h2>
  </header>
  <section>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="text-muted">Student:</label><br>
        <a href="{% url 'academics:student_detail' daily_log.student.pk %}">{{ daily_log.student.name }}</a>
      </div>
      <div>
        <label class="text-muted">Date:</label><br>
        {{ daily_log.date|date:"F j, Y (l)" }}
      </div>
      <div>
        <label class="text-muted">Status:</label><br>
        <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium
          {% if daily_log.status == 'PRESENT' %}bg-green-600 text-white
          {% elif daily_log.status == 'ABSENT' %}bg-red-600 text-white
          {% elif daily_log.status == 'SICK' %}bg-yellow-600 text-white
          {% elif daily_log.status == 'HOLIDAY' %}bg-blue-600 text-white
          {% elif daily_log.status == 'FIELD_TRIP' %}bg-blue-600 text-white
          {% endif %}">
          {{ daily_log.get_status_display }}
        </span>
      </div>
      <div>
        <label class="text-muted">Instructional Day:</label><br>
        {% if daily_log.is_instructional_day %}
          <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-green-600 text-white">Yes</span>
        {% else %}
          <span class="badge-secondary">No</span>
        {% endif %}
      </div>
      {% if daily_log.general_notes %}
      <div class="md:col-span-2">
        <label class="text-muted">General Notes:</label>
        <div class="border rounded p-3 bg-light">
          {{ daily_log.general_notes|linebreaks }}
        </div>
      </div>
      {% endif %}
    </div>
  </section>
</div>

<!-- Course Notes -->
{% if course_notes %}
<div class="card mb-4">
  <header>
    <h2>Course Notes</h2>
  </header>
  <section>
    {% for note in course_notes %}
    <div class="mb-4">
      <h6>
        {{ note.course_enrollment.course.name }}
        <span class="badge-secondary">{{ note.course_enrollment.school_year.name }}</span>
      </h6>
      <div class="border-start border-4 border-primary ps-3">
        {{ note.notes|linebreaks }}
      </div>
      <small class="text-muted">Last updated: {{ note.updated_at|date:"F j, Y g:i A" }}</small>
    </div>
    {% endfor %}
  </section>
</div>
{% else %}
<div class="alert alert-info">
  No course notes for this day.
  <a href="{% url 'academics:dailylog_entry_date' daily_log.student.pk daily_log.date|date:'Y-m-d' %}" class="alert-link">Add course notes</a>
</div>
{% endif %}

<!-- Metadata -->
<div class="card">
  <section>
    <small class="text-muted">
      Created: {{ daily_log.created_at|date:"F j, Y g:i A" }} |
      Last Updated: {{ daily_log.updated_at|date:"F j, Y g:i A" }}
    </small>
  </section>
</div>

<!-- Actions -->
<div class="mt-4 flex gap-2">
  <a href="{% url 'academics:dailylog_entry_date' daily_log.student.pk daily_log.date|date:'Y-m-d' %}" class="btn-primary">Edit</a>
  <a href="{% url 'academics:dailylog_delete' daily_log.pk %}" class="btn-outline text-destructive hover:bg-destructive hover:text-destructive-foreground">Delete</a>
  <a href="{% url 'academics:dailylog_list' %}" class="btn-outline">Back to List</a>
</div>
{% endblock academics_content %}
