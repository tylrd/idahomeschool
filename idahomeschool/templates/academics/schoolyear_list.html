{% extends "academics/base.html" %}
{% load static %}

{% block title %}School Years{% endblock %}

{% block academics_content %}
<div class="flex justify-between items-center mb-4">
  <h1 class="text-3xl font-bold">School Years</h1>
  <a href="{% url 'academics:schoolyear_create' %}" class="btn-primary">Add School Year</a>
</div>

{% if school_years %}
<div class="card">
  <section>
    <div class="relative w-full overflow-x-auto">
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Students</th>
            <th>Courses</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for year in school_years %}
          <tr>
            <td>
              <a href="{% url 'academics:schoolyear_detail' year.pk %}" class="underline">{{ year.name }}</a>
              {% if year.is_active %}<span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium bg-green-600 text-white ml-2">Active</span>{% endif %}
            </td>
            <td>{{ year.start_date }}</td>
            <td>{{ year.end_date }}</td>
            <td>
              {% if year.is_active %}
                <span class="text-green-600">Active</span>
              {% else %}
                <span class="text-muted-foreground">Inactive</span>
              {% endif %}
            </td>
            <td>{{ year.student_count }}</td>
            <td>{{ year.course_count }}</td>
            <td>
              <div class="flex gap-2">
                <a href="{% url 'academics:schoolyear_update' year.pk %}" class="btn-sm-outline">Edit</a>
                <a href="{% url 'academics:schoolyear_delete' year.pk %}" class="btn-sm-outline text-destructive hover:bg-destructive hover:text-destructive-foreground">Delete</a>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
</div>

{% if is_paginated %}
<nav role="navigation" aria-label="pagination" class="mx-auto flex w-full justify-center mt-4">
  <ul class="flex flex-row items-center gap-1">
    {% if page_obj.has_previous %}
      <li>
        <a href="?page=1" class="btn-ghost">First</a>
      </li>
      <li>
        <a href="?page={{ page_obj.previous_page_number }}" class="btn-ghost">Previous</a>
      </li>
    {% endif %}

    <li>
      <span class="btn-outline size-auto px-4">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
    </li>

    {% if page_obj.has_next %}
      <li>
        <a href="?page={{ page_obj.next_page_number }}" class="btn-ghost">Next</a>
      </li>
      <li>
        <a href="?page={{ page_obj.paginator.num_pages }}" class="btn-ghost">Last</a>
      </li>
    {% endif %}
  </ul>
</nav>
{% endif %}

{% else %}
<div class="alert">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="10" />
    <line x1="12" x2="12" y1="8" y2="12" />
    <line x1="12" x2="12.01" y1="16" y2="16" />
  </svg>
  <h2>No school years yet</h2>
  <section>
    <p>Get started by creating your first school year.</p>
    <a href="{% url 'academics:schoolyear_create' %}" class="btn-primary mt-3">Create School Year</a>
  </section>
</div>
{% endif %}
{% endblock academics_content %}
